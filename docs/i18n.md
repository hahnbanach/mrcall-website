# MrCall Website — Internationalization (i18n)

## Setup

The website uses **next-intl v4** with the Next.js App Router.

### Supported Locales

| Code | Language | Direction | Currency | Pricing | VAT Mentioned |
|------|----------|-----------|----------|---------|---------------|
| `en` | English | LTR | $ | 29/55/160 | No |
| `it` | Italian | LTR | € | 25/50/150 | Yes (IVA) |
| `de` | German | LTR | € | 25/50/150 | Yes (MwSt.) |
| `da` | Danish | LTR | € | 25/50/150 | Yes (moms) |
| `fr` | French | LTR | € | 25/50/150 | Yes (TVA) |
| `es` | Spanish (EU) | LTR | € | 25/50/150 | Yes (IVA) |
| `pt` | Portuguese (EU) | LTR | € | 25/50/150 | Yes (IVA) |
| `ar` | Arabic (MSA) | **RTL** | $ | 29/55/160 | No |

### URL Scheme

- **`localePrefix: 'as-needed'`** — English uses clean URLs, others are prefixed:
  - `mrcall.ai/` → English
  - `mrcall.ai/it/` → Italian
  - `mrcall.ai/ar/contacts` → Arabic
  - `mrcall.ai/blog/my-post` → English (blog is always English)

## Configuration Files

### `i18n/routing.ts`
Defines available locales and default locale:
```typescript
import { defineRouting } from 'next-intl/routing';
export const routing = defineRouting({
  locales: ['en', 'it', 'de', 'da', 'fr', 'es', 'pt', 'ar'],
  defaultLocale: 'en',
  localePrefix: 'as-needed',
});
```

### `i18n/request.ts`
Server-side config that loads the appropriate message file:
```typescript
import { getRequestConfig } from 'next-intl/server';
import { routing } from './routing';

export default getRequestConfig(async ({ requestLocale }) => {
  let locale = await requestLocale;
  if (!locale || !routing.locales.includes(locale as any)) {
    locale = routing.defaultLocale;
  }
  return {
    locale,
    messages: (await import(`../messages/${locale}.json`)).default,
  };
});
```

### `i18n/navigation.ts`
Exports locale-aware navigation utilities:
```typescript
import { createNavigation } from 'next-intl/navigation';
import { routing } from './routing';
export const { Link, useRouter, usePathname, getPathname } = createNavigation(routing);
```

### `middleware.ts`
At the project root, handles automatic locale detection:
```typescript
import createMiddleware from 'next-intl/middleware';
import { routing } from './i18n/routing';
export default createMiddleware(routing);
export const config = {
  matcher: ['/((?!api|_next|.*\\..*).*)'],
};
```

## Message File Structure

Each `messages/{locale}.json` has ~350 keys organized by namespace:

```json
{
  "metadata": { "homeTitle": "...", "homeDescription": "..." },
  "common": { "tryFree": "...", "signIn": "...", "getStarted": "..." },
  "nav": { "useCases": "...", "blog": "...", "contacts": "..." },
  "hero": { "titleStart": "...", "titleAccent": "...", "titleEnd": "..." },
  "useCaseBadges": { "freelancers": "...", "medicalPractices": "..." },
  "howItWorks": { ... },
  "transcript": { "line1": "...", "line2": "...", ... },
  "useCases": { "freelancers": { "name": "...", "description": "..." } },
  "relationship": { ... },
  "chatDemo": { ... },
  "memoryGraph": { ... },
  "mobile": { ... },
  "universalBridge": { ... },
  "talkToMrCall": { ... },
  "pricing": {
    "currency": "$",
    "essentialPrice": "29",
    "starterPrice": "55",
    "professionalPrice": "160",
    "vatNote": "Cancel anytime.",
    "essential": "Essential",
    "essentialFeatures": ["Feature 1", "Feature 2", ...],
    ...
  },
  "footer": { ... },
  "contacts": { ... },
  "privacy": { ... },
  "terms": { ... },
  "cookiePolicy": { ... }
}
```

### Localized Names

Each locale uses culturally appropriate names in transcripts and demos:

| Locale | Doctor | Clinic | Person (MemoryGraph) |
|--------|--------|--------|---------------------|
| en | Dr. Smith | Smith Medical Centre | James |
| it | Dr. Rossi | Studio Rossi | Alessandro |
| de | Dr. Müller | Praxis Müller | Thomas |
| fr | Dr. Dupont | Cabinet Dupont | Pierre |
| es | Dr. García | Clínica García | Carlos |
| pt | Dr. Silva | Clínica Silva | Miguel |
| da | Dr. Nielsen | Klinik Nielsen | Lars |
| ar | د. أحمد | عيادة أحمد | أحمد |

## Adding a New Locale

1. Add the locale code to `i18n/routing.ts`:
   ```typescript
   locales: ['en', 'it', 'de', 'da', 'fr', 'es', 'pt', 'ar', 'NEW'],
   ```

2. Add blog redirect in `next.config.ts` (the `flatMap` auto-handles it if you add to the locale array there too):
   ```typescript
   ...['it', 'de', 'da', 'fr', 'es', 'pt', 'ar', 'NEW'].flatMap(...)
   ```

3. Add display label in `components/Header.tsx`:
   ```typescript
   const LOCALE_LABELS: Record<string, string> = {
     ...
     NEW: 'NW',
   };
   ```

4. Create `messages/NEW.json` — copy `en.json` and translate all values.

5. If the locale is RTL, add RTL handling in `app/[locale]/layout.tsx`:
   ```typescript
   const isRtl = locale === 'ar' || locale === 'NEW';
   ```

6. Build and verify: `npm run build` — should generate new static pages for the locale.

## RTL (Arabic) Specifics

### CSS Logical Properties Used

| Physical (avoid) | Logical (use instead) |
|-------------------|----------------------|
| `text-left` | `text-start` |
| `text-right` | `text-end` |
| `ml-*` | `ms-*` (margin-inline-start) |
| `mr-*` | `me-*` (margin-inline-end) |
| `pl-*` | `ps-*` (padding-inline-start) |
| `pr-*` | `pe-*` (padding-inline-end) |
| `left-*` | `start-*` |
| `right-*` | `end-*` |
| `left-0 right-0` | `inset-x-0` |

### Directional Elements

Arrows and directional icons that point right in LTR should flip in RTL:
```tsx
<svg className="-end-4 rtl:scale-x-[-1]" ... />
```

## Usage in Components

### Server Components
```typescript
import { getTranslations, setRequestLocale } from 'next-intl/server';

export default async function Page({ params }: { params: Promise<{ locale: string }> }) {
  const { locale } = await params;
  setRequestLocale(locale);  // Required for static generation
  const t = await getTranslations({ locale, namespace: 'contacts' });
  return <h1>{t('title')}</h1>;
}
```

### Client Components
```typescript
'use client';
import { useTranslations, useLocale } from 'next-intl';

export default function MyComponent() {
  const t = useTranslations('pricing');
  const locale = useLocale();
  return <span>{t('currency')}{t('essentialPrice')}</span>;
}
```

### Accessing Arrays
```typescript
const features = t.raw('essentialFeatures') as string[];
```

### Navigation
```typescript
import { Link, useRouter, usePathname } from '@/i18n/navigation';

// Link automatically adds locale prefix
<Link href="/contacts">...</Link>

// Programmatic navigation with locale switch
const router = useRouter();
router.replace(pathname, { locale: 'fr' });
```
